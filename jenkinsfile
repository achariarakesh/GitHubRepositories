node {
	def workspace = pwd();
	def testfolderpath = workspace + "\\TestWebSolution\\NUnitTestProject\\bin\\Release\\";

       	stage('Compile'){
	   echo "Compiling.."
	   bat "\"C:\\nuget\\nuget.exe\" restore ${workspace}\\TestWebSolution\\TestWebSolution.sln"
	   bat "\"${tool 'MSBuildLocal'}\" ${workspace}\\TestWebSolution\\TestWebSolution.sln /p:DeployOnBuild=false /p:SkipInvalidConfigurations=true /t:build /p:Configuration=Release /p:Platform=\"Any CPU\" /p:DeleteExistingFiles=True"
 	}
	
	stage('Unittest'){
	    try{
	       echo testfolderpath
	       bat "\"C:\\PROGRA~2\\NUnit.org\\nunit-console\\nunit3-console.exe\" ${testfolderpath}\\NUnitTestProject.dll --work=${testfolderpath}\\TestResult + env.BUILD_ID --out=TestResult.txt --result=TestResult.xml;format=nunit2" 
	    }
	    finally{
	   

	    }
	}
	

	stage 'Deploy'
		echo 'archine'
}

